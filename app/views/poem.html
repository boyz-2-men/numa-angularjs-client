<div class="row feed-container">
  <div class="row">

    <div class="poem-info-separator">
      <h1 class="text" style="font-family: 'Lusitana';">{{ title }}</h1>
      <hr>
    </div>

    <div ng-if="videoUrl || imageUrl" style="padding-top: 60px;"></div>

    <div ng-if="videoUrl">
      <div class="embed-responsive embed-responsive-16by9">
        <iframe class="embed-responsive-item" src="{{ trustSrc(videoUrl) }}" allowfullscreen="" frameborder="0"></iframe>
      </div>
    </div>

    <hr ng-if="videoUrl && imageUrl">

    <div ng-if="imageUrl">
      <center>
        <div class="poem-image-thumbnail">
          <img class="img-responsive" ng-src="{{ imageUrl }}" style="border-radius: 10px;"/>
        </div>
      </center>
    </div>

    <pre class="poem-body-view">
      {{ poem }}
    </pre>

    <hr style="width: 95%;">
  </div>

  <div class="row" style="padding-bottom: 30px;">
    <div class="pull-right" style="padding: 10px;" ng-show="userId !== creatorId">
      <span>by <a ng-href="/#!/user/{{ creatorId }}">{{ creatorDisplayName }}</a></span>&nbsp;
      <img class="img-circle" ng-src="{{ creatorAvatarUrl }}" style="min-height: 40px; height: 40px;">
    </div>

    <i class="ion-earth" style="font-size: 30px; padding-right: 15px;"
      data-placement="bottom" bs-tooltip="tooltipPublished"
      ng-show="userId === creatorId && isAuthenticated && isPublished">
    </i>

    <div class="pull-right" style="padding-right: 10px;" ng-show="userId === creatorId && isAuthenticated">
      <a ng-href="/#!/edit/{{ poemId }}" type="button" class="btn btn-sm btn-info">Edit</a>
      <a type="button" class="btn btn-sm btn-danger" data-animation="am-fade-and-slide-top"
        data-template="views/deletepoemmodal.html" bs-modal="modalDeletePoem"><i class="ion-close-round"></i>
      </a>
    </div>
    <div class="pull-left" style="padding-left: 10px;">
      <div ng-if="userId !== creatorId && isAuthenticated">
        <i class="ion-thumbsup" style="font-size: 30px;"
          ng-click="changeVote(vote, 'up')" ng-class="{true:'up', false:''}[vote=='up']"></i>
        <i class="ion-thumbsdown" style="font-size: 30px;"
          ng-click="changeVote(vote, 'down')" ng-class="{true:'down', false:''}[vote=='down']"></i>
      </div>
    </div>
    <div class="pull-left" style="padding: 10px;">
      <span class="label label-info">
        {{ totalVotes }}
        <span ng-show="totalVotes == 1 || totalVotes == -1">point</span>
        <span ng-show="totalVotes != 1 && totalVotes != -1">points</span>
      </span>
    </div>
    <div class="pull-left">
      <i class="ion-heart" ng-show="userId !== creatorId && isAuthenticated" ng-click="saveFavoritedPoem()" ng-class="{'favorite-poem': favoritePoem}"
        style="font-size: 30px; padding-right: 15px;"></i>
      <i class="ion-pricetags" ng-show="tags.length > 0" data-placement="right" title="Tags" data-content="{{ tags }}" bs-popover
        style="font-size: 30px; padding-right: 15px;"></i>
    </div>
  </div>

  <div class="row" style="padding-bottom: 25px;">
    <div class='form-group' ng-show="isAuthenticated">
      <textarea class='form-control poem-comment' ng-model='comment' rows='1' placeholder='Give {{ creatorDisplayName }} your feedback...'></textarea>
      <div class="pull-right" style="padding-top: 10px;">
        <button type="button" class="btn btn-sm btn-primary pull-right" ng-click="saveComment()">Save</button>
      </div>
    </div>
    <div ng-show="!isAuthenticated">
      <div class="well well-sm">
        <a ng-href="/#!/login">Log in</a> or <a ng-href="/#!/signup">signup</a> to give {{ creatorDisplayName }} your feedback
      </div>
    </div>
  </div>

  <div class="comments-border" ng-show="comments.length > 0">
    <div class="comment-item row" ng-repeat="comment in comments">
      <!-- <div class="col-xs-1">
        <div>
          <span class="vote">
            <i class="ion-arrow-up-a"></i>
          </span>
        </div>
        <div>
          <span class="vote">
            <i class="ion-arrow-down-a"></i>
          </span>
        </div>
      </div> -->
      <!-- color: #A9C9A6; background-color: #A9C9A6; height: 1px; border: none;  -->
      <hr ng-if="!$first" style="width: 95%;" />
      <div class="col-xs-1">
        <img class="img-rounded" ng-src="{{ comment.creator.avatarUrl }}" style="min-height: 40px; height: 40px; border-radius: 10px;">
      </div>
      <div class="col-xs-10">
        <div class="comment-info">
          by <span><a ng-href="/#!/user/{{ comment.creator.id }}">{{ comment.creator.displayName }}</a></span>
          <span> ⋅ {{ timeSince(comment.createdAt)}} ago</span>
          <span ng-if="isAuthenticated && (userId === creatorId || userId === comment.creator.id)">
            ⋅ <i class="ion-close-round" style="font-size: 15px; line-height: 0px;" ng-click="deleteComment(comment.id)"></i></span>
        </div>
        <div class="comment">
          <span>{{ comment.comment }}</span> <!-- <i><small>{{ comment.id }}</small></i> -->
        </div>
      </div>
<!--       <div class="col-xs-1">
        <div style="padding-top: 5px;" ng-show="userId === creatorId && isAuthenticated">
          <a type="button" class="btn btn-sm btn-danger" ng-click="deleteComment(comment.id)"><i class="ion-close-round"></i></a> -->
          <!-- data-animation="am-fade-and-slide-top"
            data-template="views/deletecommentmodal.html" bs-modal="modalDeleteComment" -->
<!--         </div>
      </div> -->
    </div>
  </div>
</div>